\doxysection{xpn\+\_\+policy\+\_\+rw.\+c File Reference}
\hypertarget{xpn__policy__rw_8c}{}\label{xpn__policy__rw_8c}\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}


File to \textquotesingle{}TODO\textquotesingle{}.  


{\ttfamily \#include \"{}xpn/xpn\+\_\+simple/xpn\+\_\+policy\+\_\+rw.\+h\"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{xpn__policy__rw_8c_a6da27ddeff96596cd2723bf07b8fb692}{Xpn\+Get\+Block}} (int fd, off\+\_\+t offset, off\+\_\+t \texorpdfstring{$\ast$}{*}local\+\_\+offset, int \texorpdfstring{$\ast$}{*}serv)
\begin{DoxyCompactList}\small\item\em Calculates the server and the offset. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_afdeb8e605c760b5d99c5b3757d8d39b1}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em The blocks that have to be read/written from/to the servers are selected by round-\/robin\+: one block from each server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_ad7cfc18f73cc0c2bc1fc5bfecb8a120c}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em The blocks that have to be read from the servers are selected by round-\/robin (one block from each server), and then, grouped in one operation per server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_a45a1f5d7ffdcfc4612cfb0c064070178}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One\+\_\+\+Finish}} (int fd, void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers, const void \texorpdfstring{$\ast$}{*}new\+\_\+buffer)
\begin{DoxyCompactList}\small\item\em This is the complementary operation to Xpn\+RWBlocks\+Policy\+RAID0\+\_\+\+All\+In\+One. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_a4faf77425e540c72adf32f4b2a49bdf7}{Xpn\+Write\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers, void \texorpdfstring{$\ast$}{*}new\+\_\+buffer)
\begin{DoxyCompactList}\small\item\em The blocks that have to be written to the servers are selected by round-\/robin (one block from each server), and then, grouped in one operation per server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_abd71195317dd6da0f646cc5faa7ad90e}{Xpn\+Read\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One}} (\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em The blocks that have to be read from the servers are 1/n of the file from each server (being \textquotesingle{}n\textquotesingle{} the number of servers). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_a0d828d9f833a8138a108d8226803bb93}{Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+Block\+By\+Block}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em The blocks that have to be read/written from/to the servers are every block from every server. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{xpn__policy__rw_8c_abd2a1f45000f3b2585c48f469a93a842}{Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One}} (\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em The blocks that have to be written to the servers are every block from every server. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{xpn__policy__rw_8c_a6a1a3f6976ef64fab402afa2e512ea96}{Xpn\+Read\+Blocks}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em Read blocks. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{xpn__policy__rw_8c_a49b4c26813ea78c86e02f2cf5eaf38ac}{Xpn\+Read\+Blocks\+Finish}} (int fd, void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers, void \texorpdfstring{$\ast$}{*}new\+\_\+buffer)
\begin{DoxyCompactList}\small\item\em \textquotesingle{}TODO\textquotesingle{}. \end{DoxyCompactList}\item 
void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{xpn__policy__rw_8c_a9bab346af6beca282fdb33dd373ad24b}{Xpn\+Write\+Blocks}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, size\+\_\+t size, off\+\_\+t offset, struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em Write blocks. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{xpn__policy__rw_8c_a167d1b91798150142c07ac50d5930cb1}{Xpn\+Write\+Blocks\+Finish}} (int fd, const void \texorpdfstring{$\ast$}{*}buffer, \+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) size\+\_\+t size, \+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) off\+\_\+t offset, \+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}io\+\_\+out, \+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}ion\+\_\+out, \+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int num\+\_\+servers, void \texorpdfstring{$\ast$}{*}new\+\_\+buffer)
\item 
ssize\+\_\+t \mbox{\hyperlink{xpn__policy__rw_8c_ac0fc9df273514c0d2170277b423908fa}{Xpn\+Read\+Get\+Total\+Bytes}} (int fd, ssize\+\_\+t \texorpdfstring{$\ast$}{*}res\+\_\+v, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em \textquotesingle{}TODO\textquotesingle{}. \end{DoxyCompactList}\item 
ssize\+\_\+t \mbox{\hyperlink{xpn__policy__rw_8c_a67a3385e0e295b5775bb32b6fde23af6}{Xpn\+Write\+Get\+Total\+Bytes}} (int fd, ssize\+\_\+t \texorpdfstring{$\ast$}{*}res\+\_\+v, int num\+\_\+servers)
\begin{DoxyCompactList}\small\item\em \textquotesingle{}TODO\textquotesingle{}. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
File to \textquotesingle{}TODO\textquotesingle{}. 

File to \textquotesingle{}TODO\textquotesingle{}.

\begin{DoxyAuthor}{Authors}
Felix Garcia Carballeira, Diego Camarmas Alonso, Alejandro Calderon Mateos, Luis Miguel Sanchez Garcia, Borja Bergua Guerra 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Jul 22, 2021 
\end{DoxyDate}
\begin{DoxyRefDesc}{Bug}
\item[\mbox{\hyperlink{bug__bug000047}{Bug}}]No known bugs. \end{DoxyRefDesc}


Definition in file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{xpn__policy__rw_8c_a6da27ddeff96596cd2723bf07b8fb692}\label{xpn__policy__rw_8c_a6da27ddeff96596cd2723bf07b8fb692} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnGetBlock@{XpnGetBlock}}
\index{XpnGetBlock@{XpnGetBlock}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnGetBlock()}{XpnGetBlock()}}
{\footnotesize\ttfamily int Xpn\+Get\+Block (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{off\+\_\+t}]{global\+\_\+offset,  }\item[{off\+\_\+t \texorpdfstring{$\ast$}{*}}]{local\+\_\+offset,  }\item[{int \texorpdfstring{$\ast$}{*}}]{serv }\end{DoxyParamCaption})}



Calculates the server and the offset. 

Calculates the server and the offset in that server of the given offset of a file.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em global\+\_\+offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em local\+\_\+offset} & \mbox{[}out\mbox{]} The offset in the server. \\
\hline
{\em serv} & \mbox{[}out\mbox{]} The server in which is located the given offset. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 on success or -\/1 on error. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00041}{41}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{xpn__file_8h_source_l00155}{xpn\+\_\+filedesc\+::block\+\_\+size}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00147}{policy\+::first\+\_\+node}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, and \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00103}{xpn\+\_\+sread()}}, \mbox{\hyperlink{xpn__rw_8c_source_l00473}{xpn\+\_\+swrite()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00363}{Xpn\+Read\+Blocks()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00296}{Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+Block\+By\+Block()}}.

\Hypertarget{xpn__policy__rw_8c_a6a1a3f6976ef64fab402afa2e512ea96}\label{xpn__policy__rw_8c_a6a1a3f6976ef64fab402afa2e512ea96} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadBlocks@{XpnReadBlocks}}
\index{XpnReadBlocks@{XpnReadBlocks}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadBlocks()}{XpnReadBlocks()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} Xpn\+Read\+Blocks (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



Read blocks. 

Calculates how the blocks have to be read from the servers. io\+\_\+out is an operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. While ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}).


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a pointer to a new buffer on success, or NULL on error. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00363}{363}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00041}{Xpn\+Get\+Block()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00138}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00258}{Xpn\+Read\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One()}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00209}{xpn\+\_\+pread()}}.

\Hypertarget{xpn__policy__rw_8c_a49b4c26813ea78c86e02f2cf5eaf38ac}\label{xpn__policy__rw_8c_a49b4c26813ea78c86e02f2cf5eaf38ac} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadBlocksFinish@{XpnReadBlocksFinish}}
\index{XpnReadBlocksFinish@{XpnReadBlocksFinish}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadBlocksFinish()}{XpnReadBlocksFinish()}}
{\footnotesize\ttfamily int Xpn\+Read\+Blocks\+Finish (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers,  }\item[{void \texorpdfstring{$\ast$}{*}}]{new\+\_\+buffer }\end{DoxyParamCaption})}



\textquotesingle{}TODO\textquotesingle{}. 

\textquotesingle{}TODO\textquotesingle{}.


\begin{DoxyParams}{Parameters}
{\em fd} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em buffer} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em size} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em offset} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em io\+\_\+out} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em num\+\_\+servers} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em new\+\_\+buffer} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}TODO\textquotesingle{}. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00419}{419}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00178}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One\+\_\+\+Finish()}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00209}{xpn\+\_\+pread()}}.

\Hypertarget{xpn__policy__rw_8c_ad7cfc18f73cc0c2bc1fc5bfecb8a120c}\label{xpn__policy__rw_8c_ad7cfc18f73cc0c2bc1fc5bfecb8a120c} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadBlocksPolicyRAID0\_AllInOne@{XpnReadBlocksPolicyRAID0\_AllInOne}}
\index{XpnReadBlocksPolicyRAID0\_AllInOne@{XpnReadBlocksPolicyRAID0\_AllInOne}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadBlocksPolicyRAID0\_AllInOne()}{XpnReadBlocksPolicyRAID0\_AllInOne()}}
{\footnotesize\ttfamily void Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



The blocks that have to be read from the servers are selected by round-\/robin (one block from each server), and then, grouped in one operation per server. 

Using this policy the nfi module will perform at most one read operation per server. This policy requires the execution of Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One\+\_\+\+Finish when the data have arrived, which will reorder the blocks. This policy is valid for read operations on a RAID0 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00138}{138}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00363}{Xpn\+Read\+Blocks()}}.

\Hypertarget{xpn__policy__rw_8c_a45a1f5d7ffdcfc4612cfb0c064070178}\label{xpn__policy__rw_8c_a45a1f5d7ffdcfc4612cfb0c064070178} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadBlocksPolicyRAID0\_AllInOne\_Finish@{XpnReadBlocksPolicyRAID0\_AllInOne\_Finish}}
\index{XpnReadBlocksPolicyRAID0\_AllInOne\_Finish@{XpnReadBlocksPolicyRAID0\_AllInOne\_Finish}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadBlocksPolicyRAID0\_AllInOne\_Finish()}{XpnReadBlocksPolicyRAID0\_AllInOne\_Finish()}}
{\footnotesize\ttfamily void Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One\+\_\+\+Finish (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{new\+\_\+buffer }\end{DoxyParamCaption})}



This is the complementary operation to Xpn\+RWBlocks\+Policy\+RAID0\+\_\+\+All\+In\+One. 

The blocks that have been read and grouped by Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One are now reordered before delivering them to the user. This policy is valid for read operations on a RAID0 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}out\mbox{]} The ordered buffer to be delivered to the user. This buffer will contain the same blocks that new\+\_\+buffer, but in the right order. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
{\em new\+\_\+buffer} & \mbox{[}in\mbox{]} The disorganized buffer that needs to be ordered. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00178}{178}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00419}{Xpn\+Read\+Blocks\+Finish()}}.

\Hypertarget{xpn__policy__rw_8c_abd71195317dd6da0f646cc5faa7ad90e}\label{xpn__policy__rw_8c_abd71195317dd6da0f646cc5faa7ad90e} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadBlocksPolicyRAID1\_AllInOne@{XpnReadBlocksPolicyRAID1\_AllInOne}}
\index{XpnReadBlocksPolicyRAID1\_AllInOne@{XpnReadBlocksPolicyRAID1\_AllInOne}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadBlocksPolicyRAID1\_AllInOne()}{XpnReadBlocksPolicyRAID1\_AllInOne()}}
{\footnotesize\ttfamily void Xpn\+Read\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One (\begin{DoxyParamCaption}\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



The blocks that have to be read from the servers are 1/n of the file from each server (being \textquotesingle{}n\textquotesingle{} the number of servers). 

This policy is only valid for read operations on a RAID1 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00258}{258}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, and \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00363}{Xpn\+Read\+Blocks()}}.

\Hypertarget{xpn__policy__rw_8c_ac0fc9df273514c0d2170277b423908fa}\label{xpn__policy__rw_8c_ac0fc9df273514c0d2170277b423908fa} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnReadGetTotalBytes@{XpnReadGetTotalBytes}}
\index{XpnReadGetTotalBytes@{XpnReadGetTotalBytes}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnReadGetTotalBytes()}{XpnReadGetTotalBytes()}}
{\footnotesize\ttfamily ssize\+\_\+t Xpn\+Read\+Get\+Total\+Bytes (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{ssize\+\_\+t \texorpdfstring{$\ast$}{*}}]{res\+\_\+v,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



\textquotesingle{}TODO\textquotesingle{}. 

\textquotesingle{}TODO\textquotesingle{}.


\begin{DoxyParams}{Parameters}
{\em fd} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em res\+\_\+v} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em num\+\_\+servers} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}TODO\textquotesingle{}. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00502}{502}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, and \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00209}{xpn\+\_\+pread()}}.

\Hypertarget{xpn__policy__rw_8c_afdeb8e605c760b5d99c5b3757d8d39b1}\label{xpn__policy__rw_8c_afdeb8e605c760b5d99c5b3757d8d39b1} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnRWBlocksPolicyBlockByBlock@{XpnRWBlocksPolicyBlockByBlock}}
\index{XpnRWBlocksPolicyBlockByBlock@{XpnRWBlocksPolicyBlockByBlock}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnRWBlocksPolicyBlockByBlock()}{XpnRWBlocksPolicyBlockByBlock()}}
{\footnotesize\ttfamily void Xpn\+RWBlocks\+Policy\+Block\+By\+Block (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



The blocks that have to be read/written from/to the servers are selected by round-\/robin\+: one block from each server. 

Using this policy the nfi module will perform one read/write operation for every single block on every server, which is not optimal. This policy is valid for read/write operations on a RAID0 partition, and for read operations on a RAID1 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{87}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{xpn__file_8h_source_l00155}{xpn\+\_\+filedesc\+::block\+\_\+size}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00041}{Xpn\+Get\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00363}{Xpn\+Read\+Blocks()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00138}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00178}{Xpn\+Read\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One\+\_\+\+Finish()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00441}{Xpn\+Write\+Blocks()}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00213}{Xpn\+Write\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One()}}.

\Hypertarget{xpn__policy__rw_8c_a9bab346af6beca282fdb33dd373ad24b}\label{xpn__policy__rw_8c_a9bab346af6beca282fdb33dd373ad24b} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteBlocks@{XpnWriteBlocks}}
\index{XpnWriteBlocks@{XpnWriteBlocks}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteBlocks()}{XpnWriteBlocks()}}
{\footnotesize\ttfamily void \texorpdfstring{$\ast$}{*} Xpn\+Write\+Blocks (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



Write blocks. 

Calculates how the blocks have to be written to the servers. io\+\_\+out is an operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. While ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}).


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 on success or -\/1 on error. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00441}{441}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00213}{Xpn\+Write\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One()}}, \mbox{\hyperlink{xpn__policy__rw_8c_source_l00347}{Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One()}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00296}{Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+Block\+By\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00573}{xpn\+\_\+pwrite()}}.

\Hypertarget{xpn__policy__rw_8c_a167d1b91798150142c07ac50d5930cb1}\label{xpn__policy__rw_8c_a167d1b91798150142c07ac50d5930cb1} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteBlocksFinish@{XpnWriteBlocksFinish}}
\index{XpnWriteBlocksFinish@{XpnWriteBlocksFinish}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteBlocksFinish()}{XpnWriteBlocksFinish()}}
{\footnotesize\ttfamily int Xpn\+Write\+Blocks\+Finish (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) size\+\_\+t}]{size,  }\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) off\+\_\+t}]{offset,  }\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int}]{num\+\_\+servers,  }\item[{void \texorpdfstring{$\ast$}{*}}]{new\+\_\+buffer }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00476}{476}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, and \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00573}{xpn\+\_\+pwrite()}}.

\Hypertarget{xpn__policy__rw_8c_a4faf77425e540c72adf32f4b2a49bdf7}\label{xpn__policy__rw_8c_a4faf77425e540c72adf32f4b2a49bdf7} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteBlocksPolicyRAID0\_AllInOne@{XpnWriteBlocksPolicyRAID0\_AllInOne}}
\index{XpnWriteBlocksPolicyRAID0\_AllInOne@{XpnWriteBlocksPolicyRAID0\_AllInOne}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteBlocksPolicyRAID0\_AllInOne()}{XpnWriteBlocksPolicyRAID0\_AllInOne()}}
{\footnotesize\ttfamily void Xpn\+Write\+Blocks\+Policy\+RAID0\+\_\+\+All\+In\+One (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers,  }\item[{void \texorpdfstring{$\ast$}{*}}]{new\+\_\+buffer }\end{DoxyParamCaption})}



The blocks that have to be written to the servers are selected by round-\/robin (one block from each server), and then, grouped in one operation per server. 

Using this policy the nfi module will perform at most one write operation per server. This policy is valid for write operations on a RAID0 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
{\em new\+\_\+buffer} & \mbox{[}in\mbox{]} The buffer used to send data (it will be modified to store the disorganized blocks before sending). \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00213}{213}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00087}{Xpn\+RWBlocks\+Policy\+Block\+By\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00441}{Xpn\+Write\+Blocks()}}.

\Hypertarget{xpn__policy__rw_8c_abd2a1f45000f3b2585c48f469a93a842}\label{xpn__policy__rw_8c_abd2a1f45000f3b2585c48f469a93a842} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteBlocksPolicyRAID1\_AllInOne@{XpnWriteBlocksPolicyRAID1\_AllInOne}}
\index{XpnWriteBlocksPolicyRAID1\_AllInOne@{XpnWriteBlocksPolicyRAID1\_AllInOne}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteBlocksPolicyRAID1\_AllInOne()}{XpnWriteBlocksPolicyRAID1\_AllInOne()}}
{\footnotesize\ttfamily void Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+All\+In\+One (\begin{DoxyParamCaption}\item[{\+\_\+\+\_\+attribute\+\_\+\+\_\+((\+\_\+\+\_\+unused\+\_\+\+\_\+)) int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



The blocks that have to be written to the servers are every block from every server. 

All the blocks are written in one operation per server. This policy is suitable for write operations on a RAID1 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00347}{347}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, and \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00441}{Xpn\+Write\+Blocks()}}.

\Hypertarget{xpn__policy__rw_8c_a0d828d9f833a8138a108d8226803bb93}\label{xpn__policy__rw_8c_a0d828d9f833a8138a108d8226803bb93} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteBlocksPolicyRAID1\_BlockByBlock@{XpnWriteBlocksPolicyRAID1\_BlockByBlock}}
\index{XpnWriteBlocksPolicyRAID1\_BlockByBlock@{XpnWriteBlocksPolicyRAID1\_BlockByBlock}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteBlocksPolicyRAID1\_BlockByBlock()}{XpnWriteBlocksPolicyRAID1\_BlockByBlock()}}
{\footnotesize\ttfamily void Xpn\+Write\+Blocks\+Policy\+RAID1\+\_\+\+Block\+By\+Block (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{const void \texorpdfstring{$\ast$}{*}}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{off\+\_\+t}]{offset,  }\item[{struct \mbox{\hyperlink{structnfi__worker__io}{nfi\+\_\+worker\+\_\+io}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{io\+\_\+out,  }\item[{int \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{ion\+\_\+out,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



The blocks that have to be read/written from/to the servers are every block from every server. 

Every block requires one operation. This policy is suitable for write operations on a RAID1 partition.


\begin{DoxyParams}{Parameters}
{\em fd} & \mbox{[}in\mbox{]} A file descriptor. \\
\hline
{\em buffer} & \mbox{[}in\mbox{]} The original buffer. \\
\hline
{\em size} & \mbox{[}in\mbox{]} The original size. \\
\hline
{\em offset} & \mbox{[}in\mbox{]} The original offset. \\
\hline
{\em io\+\_\+out} & \mbox{[}out\mbox{]} The operation matrix. io\+\_\+out\mbox{[}i\mbox{]} (row \textquotesingle{}i\textquotesingle{} in io\+\_\+out) contains the required operations in server \textquotesingle{}i\textquotesingle{}. \\
\hline
{\em ion\+\_\+out} & \mbox{[}out\mbox{]} The length of every row in io\+\_\+out. ion\+\_\+out\mbox{[}i\mbox{]} is the number of operations in server \textquotesingle{}i\textquotesingle{} (io\+\_\+out\mbox{[}i\mbox{]}). \\
\hline
{\em num\+\_\+servers} & \mbox{[}in\mbox{]} The number of servers. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00296}{296}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{xpn__file_8h_source_l00155}{xpn\+\_\+filedesc\+::block\+\_\+size}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00062}{nfi\+\_\+worker\+\_\+io\+::buffer}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00060}{nfi\+\_\+worker\+\_\+io\+::offset}}, \mbox{\hyperlink{nfi__worker__task_8h_source_l00061}{nfi\+\_\+worker\+\_\+io\+::size}}, \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}, and \mbox{\hyperlink{xpn__policy__rw_8c_source_l00041}{Xpn\+Get\+Block()}}.



Referenced by \mbox{\hyperlink{xpn__policy__rw_8c_source_l00441}{Xpn\+Write\+Blocks()}}.

\Hypertarget{xpn__policy__rw_8c_a67a3385e0e295b5775bb32b6fde23af6}\label{xpn__policy__rw_8c_a67a3385e0e295b5775bb32b6fde23af6} 
\index{xpn\_policy\_rw.c@{xpn\_policy\_rw.c}!XpnWriteGetTotalBytes@{XpnWriteGetTotalBytes}}
\index{XpnWriteGetTotalBytes@{XpnWriteGetTotalBytes}!xpn\_policy\_rw.c@{xpn\_policy\_rw.c}}
\doxysubsubsection{\texorpdfstring{XpnWriteGetTotalBytes()}{XpnWriteGetTotalBytes()}}
{\footnotesize\ttfamily ssize\+\_\+t Xpn\+Write\+Get\+Total\+Bytes (\begin{DoxyParamCaption}\item[{int}]{fd,  }\item[{ssize\+\_\+t \texorpdfstring{$\ast$}{*}}]{res\+\_\+v,  }\item[{int}]{num\+\_\+servers }\end{DoxyParamCaption})}



\textquotesingle{}TODO\textquotesingle{}. 

\textquotesingle{}TODO\textquotesingle{}.


\begin{DoxyParams}{Parameters}
{\em fd} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em res\+\_\+v} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
{\em num\+\_\+servers} & \textquotesingle{}TODO\textquotesingle{}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}TODO\textquotesingle{}. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{xpn__policy__rw_8c_source_l00523}{523}} of file \mbox{\hyperlink{xpn__policy__rw_8c_source}{xpn\+\_\+policy\+\_\+rw.\+c}}.



References \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00135}{POLICY\+\_\+\+RAID0}}, \mbox{\hyperlink{xpn_2xpn__simple_2xpn_8h_source_l00136}{POLICY\+\_\+\+RAID1}}, and \mbox{\hyperlink{xpn__file_8c_source_l00037}{xpn\+\_\+file\+\_\+table}}.



Referenced by \mbox{\hyperlink{xpn__rw_8c_source_l00573}{xpn\+\_\+pwrite()}}.

